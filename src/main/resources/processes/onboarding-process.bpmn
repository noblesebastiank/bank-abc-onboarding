<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:camunda="http://camunda.org/schema/1.0/bpmn" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="Definitions_1" targetNamespace="http://bpmn.io/schema/bpmn" exporter="Camunda Modeler" exporterVersion="5.40.0">
  <bpmn:process id="onboarding-process" name="Customer Onboarding Process" isExecutable="true" camunda:historyTimeToLive="30">
    <bpmn:startEvent id="StartEvent_1" name="Start Onboarding">
      <bpmn:outgoing>Flow_1</bpmn:outgoing>
    </bpmn:startEvent>
    <bpmn:serviceTask id="CollectInfoTask" name="Collect Customer Information" camunda:delegateExpression="${collectInfoDelegate}">
      <bpmn:incoming>Flow_1</bpmn:incoming>
      <bpmn:outgoing>Flow_2</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:intermediateCatchEvent id="WaitForDocuments" name="Wait for Documents">
      <bpmn:incoming>Flow_2</bpmn:incoming>
      <bpmn:outgoing>Flow_3</bpmn:outgoing>
      <bpmn:messageEventDefinition id="MessageEventDefinition_1" messageRef="DocumentUploadedMessage" />
    </bpmn:intermediateCatchEvent>
    <bpmn:serviceTask id="UploadDocumentsTask" name="Process Document Upload" camunda:delegateExpression="${uploadDocumentsDelegate}">
      <bpmn:incoming>Flow_3</bpmn:incoming>
      <bpmn:outgoing>Flow_4</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:serviceTask id="KycVerificationTask" name="KYC Verification" camunda:delegateExpression="${kycDelegate}">
      <bpmn:incoming>Flow_4</bpmn:incoming>
      <bpmn:outgoing>Flow_5</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:boundaryEvent id="KycErrorBoundary" name="KYC Error" attachedToRef="KycVerificationTask">
      <bpmn:outgoing>Flow_KycError</bpmn:outgoing>
      <bpmn:errorEventDefinition id="ErrorEventDefinition_Kyc" errorRef="GenericError" />
    </bpmn:boundaryEvent>
    <bpmn:serviceTask id="AddressVerificationTask" name="Address Verification" camunda:delegateExpression="${addressVerificationDelegate}">
      <bpmn:incoming>Flow_5</bpmn:incoming>
      <bpmn:outgoing>Flow_6</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:boundaryEvent id="AddressErrorBoundary" name="Address Error" attachedToRef="AddressVerificationTask">
      <bpmn:outgoing>Flow_AddressError</bpmn:outgoing>
      <bpmn:errorEventDefinition id="ErrorEventDefinition_Address" errorRef="GenericError" />
    </bpmn:boundaryEvent>
    <bpmn:serviceTask id="AccountCreationTask" name="Create Bank Account" camunda:delegateExpression="${accountCreationDelegate}">
      <bpmn:incoming>Flow_6</bpmn:incoming>
      <bpmn:outgoing>Flow_7</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:boundaryEvent id="AccountErrorBoundary" name="Account Creation Error" attachedToRef="AccountCreationTask">
      <bpmn:outgoing>Flow_AccountError</bpmn:outgoing>
      <bpmn:errorEventDefinition id="ErrorEventDefinition_Account" errorRef="GenericError" />
    </bpmn:boundaryEvent>
    <bpmn:serviceTask id="NotifyCustomerTask" name="Notify Customer" camunda:delegateExpression="${notifyCustomerDelegate}">
      <bpmn:incoming>Flow_7</bpmn:incoming>
      <bpmn:outgoing>Flow_8</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:endEvent id="EndEvent_1" name="Onboarding Complete">
      <bpmn:incoming>Flow_8</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:sequenceFlow id="Flow_1" sourceRef="StartEvent_1" targetRef="CollectInfoTask" />
    <bpmn:sequenceFlow id="Flow_2" sourceRef="CollectInfoTask" targetRef="WaitForDocuments" />
    <bpmn:sequenceFlow id="Flow_3" sourceRef="WaitForDocuments" targetRef="UploadDocumentsTask" />
    <bpmn:sequenceFlow id="Flow_4" sourceRef="UploadDocumentsTask" targetRef="KycVerificationTask" />
    <bpmn:sequenceFlow id="Flow_5" sourceRef="KycVerificationTask" targetRef="AddressVerificationTask" />
    <bpmn:sequenceFlow id="Flow_6" sourceRef="AddressVerificationTask" targetRef="AccountCreationTask" />
    <bpmn:sequenceFlow id="Flow_7" sourceRef="AccountCreationTask" targetRef="NotifyCustomerTask" />
    <bpmn:sequenceFlow id="Flow_8" sourceRef="NotifyCustomerTask" targetRef="EndEvent_1" />
    <bpmn:serviceTask id="KycErrorHandlerTask" name="Handle KYC Error" camunda:delegateExpression="${genericErrorHandlerDelegate}">
      <bpmn:incoming>Flow_KycError</bpmn:incoming>
      <bpmn:outgoing>Flow_KycErrorToEnd</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:serviceTask id="AddressErrorHandlerTask" name="Handle Address Error" camunda:delegateExpression="${genericErrorHandlerDelegate}">
      <bpmn:incoming>Flow_AddressError</bpmn:incoming>
      <bpmn:outgoing>Flow_AddressErrorToEnd</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:serviceTask id="AccountErrorHandlerTask" name="Handle Account Error" camunda:delegateExpression="${genericErrorHandlerDelegate}">
      <bpmn:incoming>Flow_AccountError</bpmn:incoming>
      <bpmn:outgoing>Flow_AccountErrorToEnd</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:endEvent id="KycErrorEnd" name="KYC Error End">
      <bpmn:incoming>Flow_KycErrorToEnd</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:endEvent id="AddressErrorEnd" name="Address Error End">
      <bpmn:incoming>Flow_AddressErrorToEnd</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:endEvent id="AccountErrorEnd" name="Account Error End">
      <bpmn:incoming>Flow_AccountErrorToEnd</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:sequenceFlow id="Flow_KycError" sourceRef="KycErrorBoundary" targetRef="KycErrorHandlerTask" />
    <bpmn:sequenceFlow id="Flow_AddressError" sourceRef="AddressErrorBoundary" targetRef="AddressErrorHandlerTask" />
    <bpmn:sequenceFlow id="Flow_AccountError" sourceRef="AccountErrorBoundary" targetRef="AccountErrorHandlerTask" />
    <bpmn:sequenceFlow id="Flow_KycErrorToEnd" sourceRef="KycErrorHandlerTask" targetRef="KycErrorEnd" />
    <bpmn:sequenceFlow id="Flow_AddressErrorToEnd" sourceRef="AddressErrorHandlerTask" targetRef="AddressErrorEnd" />
    <bpmn:sequenceFlow id="Flow_AccountErrorToEnd" sourceRef="AccountErrorHandlerTask" targetRef="AccountErrorEnd" />
  </bpmn:process>
  <bpmn:message id="DocumentUploadedMessage" name="DocumentUploadedMessage" />
  <bpmn:error id="GenericError" name="GenericError" errorCode="GENERIC_ERROR" />
  <bpmndi:BPMNDiagram id="BPMNDiagram_1">
    <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="onboarding-process">
      <bpmndi:BPMNShape id="StartEvent_1_di" bpmnElement="StartEvent_1">
        <dc:Bounds x="152" y="102" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="139" y="145" width="62" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="CollectInfoTask_di" bpmnElement="CollectInfoTask">
        <dc:Bounds x="240" y="80" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="WaitForDocuments_di" bpmnElement="WaitForDocuments">
        <dc:Bounds x="392" y="102" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="375" y="145" width="60" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="UploadDocumentsTask_di" bpmnElement="UploadDocumentsTask">
        <dc:Bounds x="480" y="80" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="KycVerificationTask_di" bpmnElement="KycVerificationTask">
        <dc:Bounds x="632" y="80" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="AddressVerificationTask_di" bpmnElement="AddressVerificationTask">
        <dc:Bounds x="784" y="80" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="AccountCreationTask_di" bpmnElement="AccountCreationTask">
        <dc:Bounds x="936" y="80" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="NotifyCustomerTask_di" bpmnElement="NotifyCustomerTask">
        <dc:Bounds x="1088" y="80" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="EndEvent_1_di" bpmnElement="EndEvent_1">
        <dc:Bounds x="1240" y="102" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1227" y="145" width="62" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="KycErrorHandlerTask_di" bpmnElement="KycErrorHandlerTask">
        <dc:Bounds x="662" y="300" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="AddressErrorHandlerTask_di" bpmnElement="AddressErrorHandlerTask">
        <dc:Bounds x="814" y="290" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="AccountErrorHandlerTask_di" bpmnElement="AccountErrorHandlerTask">
        <dc:Bounds x="966" y="290" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="KycErrorEnd_di" bpmnElement="KycErrorEnd">
        <dc:Bounds x="694" y="452" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="676" y="495" width="73" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="AddressErrorEnd_di" bpmnElement="AddressErrorEnd">
        <dc:Bounds x="846" y="452" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="830" y="495" width="68" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="AccountErrorEnd_di" bpmnElement="AccountErrorEnd">
        <dc:Bounds x="998" y="452" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="971" y="495" width="90" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="AccountErrorBoundary_di" bpmnElement="AccountErrorBoundary">
        <dc:Bounds x="998" y="200" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="984" y="243" width="64" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="AddressErrorBoundary_di" bpmnElement="AddressErrorBoundary">
        <dc:Bounds x="846" y="200" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="832" y="243" width="64" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="KycErrorBoundary_di" bpmnElement="KycErrorBoundary">
        <dc:Bounds x="694" y="200" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="680" y="243" width="64" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Flow_1_di" bpmnElement="Flow_1">
        <di:waypoint x="188" y="120" />
        <di:waypoint x="240" y="120" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_2_di" bpmnElement="Flow_2">
        <di:waypoint x="340" y="120" />
        <di:waypoint x="392" y="120" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_3_di" bpmnElement="Flow_3">
        <di:waypoint x="428" y="120" />
        <di:waypoint x="480" y="120" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_4_di" bpmnElement="Flow_4">
        <di:waypoint x="580" y="120" />
        <di:waypoint x="632" y="120" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_5_di" bpmnElement="Flow_5">
        <di:waypoint x="732" y="120" />
        <di:waypoint x="784" y="120" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_6_di" bpmnElement="Flow_6">
        <di:waypoint x="884" y="120" />
        <di:waypoint x="936" y="120" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_7_di" bpmnElement="Flow_7">
        <di:waypoint x="1036" y="120" />
        <di:waypoint x="1088" y="120" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_8_di" bpmnElement="Flow_8">
        <di:waypoint x="1188" y="120" />
        <di:waypoint x="1240" y="120" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_KycError_di" bpmnElement="Flow_KycError">
        <di:waypoint x="712" y="236" />
        <di:waypoint x="712" y="300" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_AddressError_di" bpmnElement="Flow_AddressError">
        <di:waypoint x="864" y="236" />
        <di:waypoint x="864" y="290" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_AccountError_di" bpmnElement="Flow_AccountError">
        <di:waypoint x="1016" y="236" />
        <di:waypoint x="1016" y="290" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_KycErrorToEnd_di" bpmnElement="Flow_KycErrorToEnd">
        <di:waypoint x="712" y="380" />
        <di:waypoint x="712" y="452" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_AddressErrorToEnd_di" bpmnElement="Flow_AddressErrorToEnd">
        <di:waypoint x="864" y="370" />
        <di:waypoint x="864" y="452" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_AccountErrorToEnd_di" bpmnElement="Flow_AccountErrorToEnd">
        <di:waypoint x="1016" y="370" />
        <di:waypoint x="1016" y="452" />
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</bpmn:definitions>
